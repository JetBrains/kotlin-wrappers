// Generated by Karakum - do not modify it manually!

@file:JsModule("INTERNAL_ENTITY")

package electron.core

import node.events.EventEmitter as NodeEventEmitter

external class UtilityProcess : NodeEventEmitter {
    /**
     * Emitted when the child process needs to terminate due to non continuable error
     * from V8.
     *
     * No matter if you listen to the `error` event, the `exit` event will be emitted
     * after the child process terminates.
     *
     * @experimental
     */

    /**
     * Emitted after the child process ends.
     */

    /**
     * Emitted when the child process sends a message using
     * `process.parentPort.postMessage()`.
     */

    /**
     * Emitted once the child process has spawned successfully.
     */

    /**
     * @experimental
     */


    /**
     * @experimental
     */


    /**
     * @experimental
     */


    /**
     * @experimental
     */


    /**
     * Terminates the process gracefully. On POSIX, it uses SIGTERM but will ensure the
     * process is reaped on exit. This function returns true if the kill is successful,
     * and false otherwise.
     */
    fun kill(): Boolean

    /**
     * Send a message to the child process, optionally transferring ownership of zero
     * or more `MessagePortMain` objects.
     *
     * For example:
     */
    fun postMessage(message: Any?, transfer: js.array.ReadonlyArray<MessagePortMain> = definedExternally): Unit

    /**
     * A `Integer | undefined` representing the process identifier (PID) of the child
     * process. Until the child process has spawned successfully, the value is
     * `undefined`. When the child process exits, then the value is `undefined` after
     * the `exit` event is emitted.
     *
     * **Note:** You can use the `pid` to determine if the process is currently
     * running.
     */
    var pid: Double?

    /**
     * A `NodeJS.ReadableStream | null` that represents the child process's stderr. If
     * the child was spawned with options.stdio[2] set to anything other than 'pipe',
     * then this will be `null`. When the child process exits, then the value is `null`
     * after the `exit` event is emitted.
     */
    var stderr: node.ReadableStream?

    /**
     * A `NodeJS.ReadableStream | null` that represents the child process's stdout. If
     * the child was spawned with options.stdio[1] set to anything other than 'pipe',
     * then this will be `null`. When the child process exits, then the value is `null`
     * after the `exit` event is emitted.
     */
    var stdout: node.ReadableStream?

    @web.events.JsEvent("error")
    val errorEvent: node.events.EventInstance<js.array.JsTuple3<(String /* 'FatalError' */), String, String>>

    @web.events.JsEvent("exit")
    val exitEvent: node.events.EventInstance<js.array.JsTuple1<Double>>

    @web.events.JsEvent("message")
    val messageEvent: node.events.EventInstance<js.array.JsTuple1<Any?>>

    @web.events.JsEvent("spawn")
    val spawnEvent: node.events.EventInstance<js.array.JsTuple>

    companion object {
        // Docs: https://electronjs.org/docs/api/utility-process
        fun fork(
            modulePath: String,
            args: js.array.ReadonlyArray<String> = definedExternally,
            options: ForkOptions = definedExternally,
        ): UtilityProcess
    }
}
