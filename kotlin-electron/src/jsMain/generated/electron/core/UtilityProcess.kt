// Generated by Karakum - do not modify it manually!

@file:JsModule("INTERNAL_ENTITY")

package electron.core

import node.events.EventEmitter as NodeEventEmitter

external class UtilityProcess : NodeEventEmitter {
    /**
     * Emitted after the child process ends.
     */

    /**
     * Emitted when the child process sends a message using
     * `process.parentPort.postMessage()`.
     */

    /**
     * Emitted once the child process has spawned successfully.
     */


    /**
     * Terminates the process gracefully. On POSIX, it uses SIGTERM but will ensure the
     * process is reaped on exit. This function returns true if the kill is successful,
     * and false otherwise.
     */
    fun kill(): Boolean

    /**
     * Send a message to the child process, optionally transferring ownership of zero
     * or more `MessagePortMain` objects.
     *
     * For example:
     */
    fun postMessage(message: Any?, transfer: js.array.ReadonlyArray<MessagePortMain> = definedExternally): Unit

    /**
     * A `Integer | undefined` representing the process identifier (PID) of the child
     * process. If the child process fails to spawn due to errors, then the value is
     * `undefined`. When the child process exits, then the value is `undefined` after
     * the `exit` event is emitted.
     */
    var pid: Double?

    /**
     * A `NodeJS.ReadableStream | null` that represents the child process's stderr. If
     * the child was spawned with options.stdio[2] set to anything other than 'pipe',
     * then this will be `null`. When the child process exits, then the value is `null`
     * after the `exit` event is emitted.
     */
    var stderr: node.ReadableStream?

    /**
     * A `NodeJS.ReadableStream | null` that represents the child process's stdout. If
     * the child was spawned with options.stdio[1] set to anything other than 'pipe',
     * then this will be `null`. When the child process exits, then the value is `null`
     * after the `exit` event is emitted.
     */
    var stdout: node.ReadableStream?

    @web.events.JsEvent("exit")
    val exitEvent: node.events.EventInstance<js.array.JsTuple1<Double>>

    @web.events.JsEvent("message")
    val messageEvent: node.events.EventInstance<js.array.JsTuple1<Any?>>

    @web.events.JsEvent("spawn")
    val spawnEvent: node.events.EventInstance<js.array.JsTuple>

    companion object {
        // Docs: https://electronjs.org/docs/api/utility-process
        fun fork(
            modulePath: String,
            args: js.array.ReadonlyArray<String> = definedExternally,
            options: ForkOptions = definedExternally,
        ): UtilityProcess
    }
}
